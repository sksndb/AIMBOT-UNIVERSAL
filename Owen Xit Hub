-- Owen Xit Hub | Aimbot + ESP (OPTIMIZADO FPS - NO LAG CON MUCHOS JUGADORES)
-- Key CONECTADA REMOTAMENTE a https://pastebin.com/raw/h7RQseud
-- Cambia la key editando SOLO ese pastebin, sin tocar este script

local KeySystemEnabled = true
local KeyUrl = "https://pastebin.com/raw/h7RQseud"

-- Descarga la clave remota (con fallback si falla internet o pastebin)
local CorrectKey = "fallback_key" -- por si no carga
pcall(function()
    local response = game:HttpGet(KeyUrl, true) -- true = no cache
    if response and response ~= "" then
        CorrectKey = response:match("^%s*(.-)%s*$") or CorrectKey
    end
end)

-- Archivo local para persistir (no pide key cada server hop)
local KeyFile = "owen_xit_key.txt"

local function LoadSavedKey()
    if isfile and isfile(KeyFile) then
        local content = readfile(KeyFile)
        return content:match("^%s*(.-)%s*$") or ""
    end
    return nil
end

local function SaveKey(key)
    if writefile then
        writefile(KeyFile, key)
    end
end

local savedKey = LoadSavedKey()

if KeySystemEnabled and savedKey ~= CorrectKey then
    local entered = false

    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Parent = game.CoreGui
    ScreenGui.Name = "OwenKeyGui"
    ScreenGui.ResetOnSpawn = false

    local Frame = Instance.new("Frame")
    Frame.Size = UDim2.new(0, 300, 0, 180)
    Frame.Position = UDim2.new(0.5, -150, 0.5, -90)
    Frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    Frame.BorderSizePixel = 0
    Frame.Parent = ScreenGui

    local Title = Instance.new("TextLabel")
    Title.Size = UDim2.new(1, 0, 0, 40)
    Title.BackgroundTransparency = 1
    Title.Text = "Owen Xit Hub - Key System (Remota)"
    Title.TextColor3 = Color3.fromRGB(255, 100, 100)
    Title.TextSize = 24
    Title.Font = Enum.Font.SourceSansBold
    Title.Parent = Frame

    local InputBox = Instance.new("TextBox")
    InputBox.Size = UDim2.new(0.8, 0, 0, 40)
    InputBox.Position = UDim2.new(0.1, 0, 0.3, 0)
    InputBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    InputBox.TextColor3 = Color3.fromRGB(255, 255, 255)
    InputBox.PlaceholderText = "Ingresa la key..."
    InputBox.Text = ""
    InputBox.Font = Enum.Font.SourceSans
    InputBox.TextSize = 18
    InputBox.Parent = Frame

    local SubmitButton = Instance.new("TextButton")
    SubmitButton.Size = UDim2.new(0.8, 0, 0, 40)
    SubmitButton.Position = UDim2.new(0.1, 0, 0.55, 0)
    SubmitButton.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
    SubmitButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    SubmitButton.Text = "Verificar Key"
    SubmitButton.Font = Enum.Font.SourceSansBold
    SubmitButton.TextSize = 20
    SubmitButton.Parent = Frame

    local Status = Instance.new("TextLabel")
    Status.Size = UDim2.new(0.8, 0, 0, 30)
    Status.Position = UDim2.new(0.1, 0, 0.8, 0)
    Status.BackgroundTransparency = 1
    Status.Text = ""
    Status.TextColor3 = Color3.fromRGB(255, 80, 80)
    Status.TextSize = 16
    Status.Font = Enum.Font.SourceSans
    Status.Parent = Frame

    local function CheckKey(keyInput)
        if keyInput == CorrectKey then
            SaveKey(keyInput)
            entered = true
            Status.Text = "¬°Key correcta! Cargando... (guardada)"
            Status.TextColor3 = Color3.fromRGB(0, 255, 100)
            wait(1.5)
            ScreenGui:Destroy()
        else
            Status.Text = "Key incorrecta. Intenta de nuevo."
            InputBox.Text = ""
        end
    end

    InputBox.FocusLost:Connect(function(enterPressed)
        if enterPressed then CheckKey(InputBox.Text) end
    end)

    SubmitButton.MouseButton1Click:Connect(function()
        CheckKey(InputBox.Text)
    end)

    repeat task.wait() until entered or not ScreenGui.Parent
    if not entered then return end
end

-- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
-- SCRIPT PRINCIPAL
-- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "Owen Xit Hub",
   LoadingTitle = "El Mejor Hub Del Momento",
   LoadingSubtitle = "Cargando el mejor hub...",
   ConfigurationSaving = {
      Enabled = true,
      FolderName = "RayfieldConfigs",
      FileName = "OwenXitHub"
   },
   KeySystem = false
})

local AimbotTab = Window:CreateTab("üéØ Aimbot", 4483362458)
local VisualsTab = Window:CreateTab("üé® Visuals", 4483362458)
local SettingsTab = Window:CreateTab("‚öôÔ∏è Settings", 4483362456)

getgenv().ExunysDeveloperAimbot = {
   DeveloperSettings = {RainbowSpeed = 1},
   Settings = {
      Enabled = true, TeamCheck = false, AliveCheck = true, WallCheck = false,
      Sensitivity = 0, Sensitivity2 = 3.5, LockMode = 1, LockPart = "Head",
      TriggerKey = Enum.UserInputType.MouseButton2, Toggle = false
   },
   FOVSettings = {
      Enabled = true, Visible = true, Radius = 90, NumSides = 60, Thickness = 1,
      Transparency = 1, Filled = false, RainbowColor = false, RainbowOutlineColor = false,
      Color = Color3.fromRGB(255, 255, 255), OutlineColor = Color3.fromRGB(0, 0, 0),
      LockedColor = Color3.fromRGB(255, 150, 150)
   },
   Blacklisted = {},
   FOVCircleOutline = Drawing.new("Circle"),
   FOVCircle = Drawing.new("Circle")
}

local Env = getgenv().ExunysDeveloperAimbot
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UIS = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local LP = Players.LocalPlayer
local Camera = workspace.CurrentCamera

Env.FOVCircle.Visible = false
Env.FOVCircleOutline.Visible = false

local RequiredDistance, Typing, Running, CurrentTween = 2000, false, false, nil
local FrameCounter = 0

local ESPSettings = {
   Enabled = false, Boxes = true, Tracers = true, Names = true, Skeleton = true, HealthBars = true,
   TeamCheck = true, Rainbow = false, Color = Color3.fromRGB(255, 0, 255),
   Thickness = 2, TextSize = 16, MaxDistance = 300
}

local ESPObjects = {}
local R15Links = {{"Head","UpperTorso"}, {"UpperTorso","LowerTorso"}, {"LowerTorso","LeftUpperLeg"},{"LeftUpperLeg","LeftLowerLeg"},{"LeftLowerLeg","LeftFoot"}, {"LowerTorso","RightUpperLeg"},{"RightUpperLeg","RightLowerLeg"},{"RightLowerLeg","RightFoot"}, {"UpperTorso","LeftUpperArm"},{"LeftUpperArm","LeftLowerArm"},{"LeftLowerArm","LeftHand"}, {"UpperTorso","RightUpperArm"},{"RightUpperArm","RightLowerArm"},{"RightLowerArm","RightHand"}}
local R6Links = {{"Head","Torso"}, {"Torso","Left Arm"}, {"Torso","Right Arm"}, {"Torso","Left Leg"}, {"Torso","Right Leg"}}

local function CreateESP(p)
   if ESPObjects[p] then return end
   local char = p.Character or p.CharacterAdded:Wait()
   if not char then return end
   local data = {Links = char:FindFirstChild("UpperTorso") and R15Links or R6Links}
   if ESPSettings.Boxes then data.Box = Drawing.new("Square") data.Box.Filled = false data.Box.Transparency = 1 data.Box.Thickness = ESPSettings.Thickness end
   if ESPSettings.Tracers then data.Tracer = Drawing.new("Line") data.Tracer.Thickness = 1.5 data.Tracer.Transparency = 1 end
   if ESPSettings.Names then data.Name = Drawing.new("Text") data.Name.Center = true data.Name.Outline = true data.Name.OutlineColor = Color3.new(0,0,0) data.Name.Font = 2 data.Name.Size = ESPSettings.TextSize data.Name.Transparency = 1 end
   if ESPSettings.HealthBars then
      data.HBBG = Drawing.new("Square") data.HBBG.Filled = true data.HBBG.Color = Color3.new(0,0,0) data.HBBG.Transparency = 0.6
      data.HB = Drawing.new("Square") data.HB.Filled = true data.HB.Transparency = 1
   end
   data.SkelLines = {}
   if ESPSettings.Skeleton then for _ = 1, #data.Links do local ln = Drawing.new("Line") ln.Thickness = 1.8 ln.Transparency = 0.7 table.insert(data.SkelLines, ln) end end
   data.Highlight = Instance.new("Highlight") data.Highlight.FillTransparency = 0.4 data.Highlight.OutlineTransparency = 0 data.Highlight.Parent = Camera
   ESPObjects[p] = data
end

local function RemoveESP(p)
   local d = ESPObjects[p] if not d then return end
   if d.Box then d.Box:Remove() end if d.Tracer then d.Tracer:Remove() end if d.Name then d.Name:Remove() end
   if d.HBBG then d.HBBG:Remove() end if d.HB then d.HB:Remove() end
   for _, l in ipairs(d.SkelLines or {}) do l:Remove() end if d.Highlight then d.Highlight:Destroy() end
   ESPObjects[p] = nil
end

local function GetClosestPlayer()
   local s = Env.Settings local visRad = Env.FOVSettings.Radius local intRad = 330 - visRad RequiredDistance = Env.FOVSettings.Enabled and intRad or 2000
   local Closest, dist = nil, RequiredDistance
   for _, p in Players:GetPlayers() do
      if p == LP then continue end local c = p.Character local h = c and c:FindFirstChildOfClass("Humanoid")
      if not (c and h and h.Health > 0 and c:FindFirstChild(s.LockPart)) then continue end
      if s.TeamCheck and p.Team == LP.Team then continue end if table.find(Env.Blacklisted, p.Name) then continue end
      local part = c[s.LockPart]
      if s.WallCheck then
         local parts = LP.Character and LP.Character:GetDescendants() or {}
         for _, v in c:GetDescendants() do table.insert(parts, v) end
         if #Camera:GetPartsObscuringTarget({part.Position}, parts) > 0 then continue end
      end
      local vec, onScr = Camera:WorldToViewportPoint(part.Position)
      local d = (UIS:GetMouseLocation() - Vector2.new(vec.X, vec.Y)).Magnitude
      if d < dist and onScr then dist = d Closest = p end
   end
   return Closest
end

RunService.Stepped:Connect(function()
   FrameCounter += 1 if FrameCounter % 3 ~= 0 then return end
   local f = Env.FOVSettings local s = Env.Settings local fc = Env.FOVCircle local fo = Env.FOVCircleOutline
   local col = Env.Locked and f.LockedColor or (f.RainbowColor and Color3.fromHSV(tick() % 5, 1, 1) or f.Color)
   if f.Enabled and s.Enabled then
      fc.Radius = f.Radius fc.NumSides = f.NumSides fc.Thickness = f.Thickness fc.Transparency = f.Transparency fc.Filled = f.Filled fc.Visible = f.Visible fc.Position = UIS:GetMouseLocation() fc.Color = col
      fo.Radius = f.Radius + f.Thickness fo.NumSides = f.NumSides fo.Thickness = f.Thickness + 1 fo.Transparency = f.Transparency fo.Visible = f.Visible fo.Position = UIS:GetMouseLocation() fo.Color = f.RainbowOutlineColor and Color3.fromHSV(tick() % 5, 1, 1) or f.OutlineColor
   else fc.Visible = false fo.Visible = false end
   if not ESPSettings.Enabled then return end
   for _, p in Players:GetPlayers() do
      if p == LP then continue end local c = p.Character local root = c and c:FindFirstChild("HumanoidRootPart") local hum = c and c:FindFirstChild("Humanoid")
      if not (c and root and hum and hum.Health > 0) then RemoveESP(p) continue end
      if ESPSettings.TeamCheck and p.Team == LP.Team then RemoveESP(p) continue end
      local dist = (LP.Character and LP.Character:FindFirstChild("HumanoidRootPart") and (root.Position - LP.Character.HumanoidRootPart.Position).Magnitude) or 5000
      if dist > ESPSettings.MaxDistance then RemoveESP(p) continue end
      if not ESPObjects[p] then CreateESP(p) end
      local d = ESPObjects[p]
      local headPos, headVis = Camera:WorldToViewportPoint(c.Head.Position + Vector3.new(0,1,0))
      local rootPos, rootVis = Camera:WorldToViewportPoint(root.Position)
      local scale = 1000 / (rootPos.Z * math.tan(math.rad(Camera.FieldOfView * 0.5)))
      local sizeY = math.clamp(math.abs(headPos.Y - rootPos.Y) * scale, 2, math.huge)
      local sizeX = sizeY * 0.6
      local pos = Vector2.new(math.floor(rootPos.X - sizeX * 0.5), math.floor(rootPos.Y - sizeY * 0.5))
      local health = hum.Health / hum.MaxHealth
      local color = ESPSettings.Rainbow and Color3.fromHSV(tick() % 5, 1, 1) or ESPSettings.Color

      if d.Box then
         d.Box.Size = Vector2.new(sizeX, sizeY)
         d.Box.Position = pos
         d.Box.Color = color
         d.Box.Visible = ESPSettings.Boxes and rootVis
      end

      if d.Tracer then
         d.Tracer.From = Vector2.new(Camera.ViewportSize.X * 0.5, Camera.ViewportSize.Y)
         d.Tracer.To = Vector2.new(rootPos.X, rootPos.Y + sizeY * 0.5)
         d.Tracer.Color = color
         d.Tracer.Visible = ESPSettings.Tracers and rootVis
      end

      if d.Name then
         d.Name.Text = p.Name .. " [" .. math.floor(hum.Health) .. "]"
         d.Name.Position = Vector2.new(pos.X + sizeX * 0.5, pos.Y - 16)
         d.Name.Color = color
         d.Name.Visible = ESPSettings.Names and headVis
      end

      if d.HBBG and d.HB then
         local hbY = sizeY * (1 - health)
         d.HBBG.Size = Vector2.new(3, sizeY)
         d.HBBG.Position = Vector2.new(pos.X - 5, pos.Y)
         d.HBBG.Visible = ESPSettings.HealthBars and rootVis

         d.HB.Size = Vector2.new(3, sizeY * health)
         d.HB.Position = Vector2.new(pos.X - 5, pos.Y + hbY)
         d.HB.Color = Color3.fromHSV(health * 0.3, 1, 1)
         d.HB.Visible = ESPSettings.HealthBars and rootVis
      end

      if d.Highlight then
         d.Highlight.Adornee = c
         d.Highlight.FillColor = color
         d.Highlight.Enabled = ESPSettings.Enabled
      end

      if ESPSettings.Skeleton and d.SkelLines then
         for i, link in ipairs(d.Links) do
            local partA = c:FindFirstChild(link[1])
            local partB = c:FindFirstChild(link[2])
            if partA and partB then
               local a, va = Camera:WorldToViewportPoint(partA.Position)
               local b, vb = Camera:WorldToViewportPoint(partB.Position)
               local ln = d.SkelLines[i]
               ln.From = Vector2.new(a.X, a.Y)
               ln.To = Vector2.new(b.X, b.Y)
               ln.Color = color
               ln.Visible = va and vb and ESPSettings.Skeleton
            end
         end
      end
   end
end)

-- Aimbot logic (Exunys style)
local function AimAt(target)
   if not target then return end
   local s = Env.Settings
   local part = target.Character[s.LockPart]
   if not part then return end

   local current = Camera.CFrame
   local targetPos = part.Position

   if s.Sensitivity > 0 then
      local tweenInfo = TweenInfo.new(s.Sensitivity2, Enum.EasingStyle.Linear)
      if CurrentTween then CurrentTween:Cancel() end
      CurrentTween = TweenService:Create(Camera, tweenInfo, {CFrame = CFrame.new(current.Position, targetPos)})
      CurrentTween:Play()
   else
      Camera.CFrame = CFrame.new(current.Position, targetPos)
   end
end

RunService.RenderStepped:Connect(function()
   if not Env.Settings.Enabled then return end
   local target = GetClosestPlayer()
   Env.Locked = target ~= nil

   if UIS:IsMouseButtonPressed(Env.Settings.TriggerKey) or (Env.Settings.Toggle and Env.Locked) then
      AimAt(target)
   end
end)

-- Interfaz toggles (Aimbot)
AimbotTab:CreateToggle({
   Name = "Aimbot Enabled",
   CurrentValue = true,
   Flag = "AimbotEnabled",
   Callback = function(v) Env.Settings.Enabled = v end
})

AimbotTab:CreateToggle({
   Name = "Team Check",
   CurrentValue = false,
   Flag = "TeamCheck",
   Callback = function(v) Env.Settings.TeamCheck = v end
})

AimbotTab:CreateToggle({
   Name = "Alive Check",
   CurrentValue = true,
   Flag = "AliveCheck",
   Callback = function(v) Env.Settings.AliveCheck = v end
})

AimbotTab:CreateToggle({
   Name = "Wall Check",
   CurrentValue = false,
   Flag = "WallCheck",
   Callback = function(v) Env.Settings.WallCheck = v end
})

AimbotTab:CreateSlider({
   Name = "Sensitivity (0 = Instant)",
   Range = {0, 1},
   Increment = 0.01,
   CurrentValue = 0,
   Flag = "Sensitivity",
   Callback = function(v) Env.Settings.Sensitivity = v end
})

AimbotTab:CreateSlider({
   Name = "FOV Radius",
   Range = {30, 500},
   Increment = 5,
   CurrentValue = 90,
   Flag = "FOVRadius",
   Callback = function(v) Env.FOVSettings.Radius = v end
})

AimbotTab:CreateToggle({
   Name = "Show FOV Circle",
   CurrentValue = true,
   Flag = "FOVVisible",
   Callback = function(v) Env.FOVSettings.Visible = v end
})

AimbotTab:CreateToggle({
   Name = "Rainbow FOV",
   CurrentValue = false,
   Flag = "FOVRainbow",
   Callback = function(v) Env.FOVSettings.RainbowColor = v end
})

-- Visuals Tab (ESP)
VisualsTab:CreateToggle({
   Name = "ESP Enabled",
   CurrentValue = false,
   Flag = "ESPEnabled",
   Callback = function(v) ESPSettings.Enabled = v end
})

VisualsTab:CreateToggle({
   Name = "Boxes",
   CurrentValue = true,
   Flag = "Boxes",
   Callback = function(v) ESPSettings.Boxes = v end
})

VisualsTab:CreateToggle({
   Name = "Tracers",
   CurrentValue = true,
   Flag = "Tracers",
   Callback = function(v) ESPSettings.Tracers = v end
})

VisualsTab:CreateToggle({
   Name = "Names",
   CurrentValue = true,
   Flag = "Names",
   Callback = function(v) ESPSettings.Names = v end
})

VisualsTab:CreateToggle({
   Name = "Skeleton",
   CurrentValue = true,
   Flag = "Skeleton",
   Callback = function(v) ESPSettings.Skeleton = v end
})

VisualsTab:CreateToggle({
   Name = "Health Bars",
   CurrentValue = true,
   Flag = "HealthBars",
   Callback = function(v) ESPSettings.HealthBars = v end
})

VisualsTab:CreateToggle({
   Name = "Team Check",
   CurrentValue = true,
   Flag = "ESPTeamCheck",
   Callback = function(v) ESPSettings.TeamCheck = v end
})

VisualsTab:CreateToggle({
   Name = "Rainbow Color",
   CurrentValue = false,
   Flag = "ESPRainbow",
   Callback = function(v) ESPSettings.Rainbow = v end
})

VisualsTab:CreateColorpicker({
   Name = "ESP Color",
   Color = Color3.fromRGB(255,0,255),
   Flag = "ESPColor",
   Callback = function(v) ESPSettings.Color = v end
})

VisualsTab:CreateSlider({
   Name = "Max Distance",
   Range = {100, 1000},
   Increment = 50,
   CurrentValue = 300,
   Flag = "MaxDistance",
   Callback = function(v) ESPSettings.MaxDistance = v end
})

Rayfield:Notify({
   Title = "Owen Xit Hub Loaded",
   Content = "Aimbot + ESP cargado correctamente. Usa el men√∫ para configurar.",
   Duration = 6.5,
   Image = 4483362458,
   Actions = {}
})
