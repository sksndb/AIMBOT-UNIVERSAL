-- Owen Xit Hub | Aimbot + ESP (OPTIMIZADO FPS - NO LAG CON MUCHOS JUGADORES)
-- Key CONECTADA REMOTAMENTE a https://pastebin.com/raw/h7RQseud
-- Cambia la key editando SOLO ese pastebin, sin tocar este script
local KeySystemEnabled = true
local KeyUrl = "https://pastebin.com/raw/h7RQseud"
-- Descarga la clave remota (con fallback si falla internet o pastebin)
local CorrectKey = "fallback_key" -- por si no carga
pcall(function()
    local response = game:HttpGet(KeyUrl, true) -- true = no cache
    if response and response ~= "" then
        CorrectKey = response:match("^%s*(.-)%s*$") or CorrectKey
    end
end)
-- Archivo local para persistir (no pide key cada server hop)
local KeyFile = "owen_xit_key.txt"
local function LoadSavedKey()
    if isfile and isfile(KeyFile) then
        local content = readfile(KeyFile)
        return content:match("^%s*(.-)%s*$") or ""
    end
    return nil
end
local function SaveKey(key)
    if writefile then
        writefile(KeyFile, key)
    end
end
local savedKey = LoadSavedKey()
if KeySystemEnabled and savedKey ~= CorrectKey then
    local entered = false
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Parent = game.CoreGui
    ScreenGui.Name = "OwenKeyGui"
    ScreenGui.ResetOnSpawn = false
    local Frame = Instance.new("Frame")
    Frame.Size = UDim2.new(0, 300, 0, 180)
    Frame.Position = UDim2.new(0.5, -150, 0.5, -90)
    Frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    Frame.BorderSizePixel = 0
    Frame.Parent = ScreenGui
    local Title = Instance.new("TextLabel")
    Title.Size = UDim2.new(1, 0, 0, 40)
    Title.BackgroundTransparency = 1
    Title.Text = "Owen Xit Hub - Key System (Remota)"
    Title.TextColor3 = Color3.fromRGB(255, 100, 100)
    Title.TextSize = 24
    Title.Font = Enum.Font.SourceSansBold
    Title.Parent = Frame
    local InputBox = Instance.new("TextBox")
    InputBox.Size = UDim2.new(0.8, 0, 0, 40)
    InputBox.Position = UDim2.new(0.1, 0, 0.3, 0)
    InputBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    InputBox.TextColor3 = Color3.fromRGB(255, 255, 255)
    InputBox.PlaceholderText = "Ingresa la key..."
    InputBox.Text = ""
    InputBox.Font = Enum.Font.SourceSans
    InputBox.TextSize = 18
    InputBox.Parent = Frame
    local SubmitButton = Instance.new("TextButton")
    SubmitButton.Size = UDim2.new(0.8, 0, 0, 40)
    SubmitButton.Position = UDim2.new(0.1, 0, 0.55, 0)
    SubmitButton.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
    SubmitButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    SubmitButton.Text = "Verificar Key"
    SubmitButton.Font = Enum.Font.SourceSansBold
    SubmitButton.TextSize = 20
    SubmitButton.Parent = Frame
    local Status = Instance.new("TextLabel")
    Status.Size = UDim2.new(0.8, 0, 0, 30)
    Status.Position = UDim2.new(0.1, 0, 0.8, 0)
    Status.BackgroundTransparency = 1
    Status.Text = ""
    Status.TextColor3 = Color3.fromRGB(255, 80, 80)
    Status.TextSize = 16
    Status.Font = Enum.Font.SourceSans
    Status.Parent = Frame
    local function CheckKey(keyInput)
        if keyInput == CorrectKey then
            SaveKey(keyInput)
            entered = true
            Status.Text = "隆Key correcta! Cargando... (guardada)"
            Status.TextColor3 = Color3.fromRGB(0, 255, 100)
            wait(1.5)
            ScreenGui:Destroy()
        else
            Status.Text = "Key incorrecta. Intenta de nuevo."
            InputBox.Text = ""
        end
    end
    InputBox.FocusLost:Connect(function(enterPressed)
        if enterPressed then CheckKey(InputBox.Text) end
    end)
    SubmitButton.MouseButton1Click:Connect(function()
        CheckKey(InputBox.Text)
    end)
    repeat task.wait() until entered or not ScreenGui.Parent
    if not entered then return end
end

-- 
-- SCRIPT PRINCIPAL
-- 
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
local Window = Rayfield:CreateWindow({
   Name = "Owen Xit Hub",
   LoadingTitle = "El Mejor Hub Del Momento",
   LoadingSubtitle = "Cargando el mejor hub...",
   ConfigurationSaving = {
      Enabled = true,
      FolderName = "RayfieldConfigs",
      FileName = "OwenXitHub"
   },
   KeySystem = false
})

local AimbotTab = Window:CreateTab(" Aimbot", 4483362458)
local VisualsTab = Window:CreateTab(" Visuals", 4483362458)
local SettingsTab = Window:CreateTab("锔 Settings", 4483362456)

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UIS = game:GetService("UserInputService")
local LP = Players.LocalPlayer
local Camera = workspace.CurrentCamera

-- Configuraci贸n del aimbot descarado
getgenv().OwenDescaradoAimbot = {
    Enabled = true,
    TeamCheck = false,
    WallCheck = false,
    LockPart = "Head",
    TriggerKey = Enum.UserInputType.MouseButton2,
    FOV_Enabled = true,
    FOV_Radius = 30,           -- valor recomendado inicial para descarado
    FOV_Color = Color3.fromRGB(255, 50, 50),
    FOV_LockedColor = Color3.fromRGB(255, 150, 150),
    FOV_Thickness = 2,
    FOV_Transparency = 0.8,
    FOV_Visible = true
}

local Descarado = getgenv().OwenDescaradoAimbot

-- C铆rculo FOV (usando Drawing para mejor rendimiento)
local FOVCircle = Drawing.new("Circle")
FOVCircle.Visible = false
FOVCircle.Thickness = Descarado.FOV_Thickness
FOVCircle.NumSides = 60
FOVCircle.Radius = Descarado.FOV_Radius
FOVCircle.Transparency = Descarado.FOV_Transparency
FOVCircle.Filled = false

local function UpdateFOVCircle()
    FOVCircle.Radius = Descarado.FOV_Radius
    FOVCircle.Color = Descarado.FOV_Color
    FOVCircle.Thickness = Descarado.FOV_Thickness
    FOVCircle.Transparency = Descarado.FOV_Transparency
    FOVCircle.Visible = Descarado.FOV_Visible and Descarado.Enabled
    FOVCircle.Position = UIS:GetMouseLocation()
end

-- Funci贸n para obtener el enemigo m谩s cercano dentro del FOV
local function GetClosestTarget()
    local closest = nil
    local minDist = Descarado.FOV_Enabled and Descarado.FOV_Radius or math.huge
    local mousePos = UIS:GetMouseLocation()

    for _, plr in ipairs(Players:GetPlayers()) do
        if plr == LP then continue end
        if Descarado.TeamCheck and plr.Team == LP.Team then continue end

        local char = plr.Character
        if not char then continue end

        local humanoid = char:FindFirstChildOfClass("Humanoid")
        if not humanoid or humanoid.Health <= 0 then continue end

        local part = char:FindFirstChild(Descarado.LockPart)
        if not part then continue end

        local screenPos, onScreen = Camera:WorldToViewportPoint(part.Position)
        if not onScreen then continue end

        local dist = (Vector2.new(screenPos.X, screenPos.Y) - mousePos).Magnitude
        if dist < minDist then
            if Descarado.WallCheck then
                local rayParams = RaycastParams.new()
                rayParams.FilterDescendantsInstances = {LP.Character or {}}
                rayParams.FilterType = Enum.RaycastFilterType.Exclude
                local ray = workspace:Raycast(Camera.CFrame.Position, (part.Position - Camera.CFrame.Position), rayParams)
                if ray and not ray.Instance:IsDescendantOf(char) then continue end
            end
            minDist = dist
            closest = part
        end
    end

    return closest
end

-- Actualizaci贸n del c铆rculo FOV cada frame
RunService.RenderStepped:Connect(function()
    if not Descarado.Enabled then 
        FOVCircle.Visible = false
        return 
    end

    UpdateFOVCircle()

    if UIS:IsMouseButtonPressed(Descarado.TriggerKey) then
        local targetPart = GetClosestTarget()
        if targetPart then
            -- SNAP INSTANTNEO (descarado total)
            Camera.CFrame = CFrame.new(Camera.CFrame.Position, targetPart.Position)
            FOVCircle.Color = Descarado.FOV_LockedColor
        else
            FOVCircle.Color = Descarado.FOV_Color
        end
    else
        FOVCircle.Color = Descarado.FOV_Color
    end
end)

-- ESP sigue igual (no lo toqu茅)
local ESPSettings = {
   Enabled = false, Boxes = true, Tracers = true, Names = true, Skeleton = true, HealthBars = true,
   TeamCheck = true, Rainbow = false, Color = Color3.fromRGB(255, 0, 255),
   Thickness = 2, TextSize = 16, MaxDistance = 300
}
local ESPObjects = {}
local R15Links = {{"Head","UpperTorso"}, {"UpperTorso","LowerTorso"}, {"LowerTorso","LeftUpperLeg"},{"LeftUpperLeg","LeftLowerLeg"},{"LeftLowerLeg","LeftFoot"}, {"LowerTorso","RightUpperLeg"},{"RightUpperLeg","RightLowerLeg"},{"RightLowerLeg","RightFoot"}, {"UpperTorso","LeftUpperArm"},{"LeftUpperArm","LeftLowerArm"},{"LeftLowerArm","LeftHand"}, {"UpperTorso","RightUpperArm"},{"RightUpperArm","RightLowerArm"},{"RightLowerArm","RightHand"}}
local R6Links = {{"Head","Torso"}, {"Torso","Left Arm"}, {"Torso","Right Arm"}, {"Torso","Left Leg"}, {"Torso","Right Leg"}}

local function CreateESP(p) 
    -- (c贸digo ESP original sin cambios, lo omito aqu铆 por brevedad pero est谩 intacto en tu script)
end

local function RemoveESP(p)
    -- (c贸digo original)
end

RunService.Stepped:Connect(function()
    -- (c贸digo ESP original sin cambios)
end)

Players.PlayerRemoving:Connect(RemoveESP)

-- 
-- INTERFAZ (mantengo tus toggles y agrego solo los del FOV)
-- 

AimbotTab:CreateToggle({
   Name = "Enable Aimbot",
   CurrentValue = true,
   Flag = "Aimbot_Enabled",
   Callback = function(v) 
       Descarado.Enabled = v 
       if not v then FOVCircle.Visible = false end
   end
})

AimbotTab:CreateToggle({
   Name = "Team Check",
   CurrentValue = false,
   Flag = "Aimbot_TeamCheck",
   Callback = function(v) Descarado.TeamCheck = v end
})

AimbotTab:CreateToggle({
   Name = "Wall Check",
   CurrentValue = false,
   Flag = "Aimbot_WallCheck",
   Callback = function(v) Descarado.WallCheck = v end
})

AimbotTab:CreateToggle({
   Name = "Show FOV Circle",
   CurrentValue = true,
   Flag = "FOV_Visible",
   Callback = function(v) Descarado.FOV_Visible = v end
})

AimbotTab:CreateSlider({
   Name = "FOV Size (20-40 = muy descarado)",
   Range = {1, 300},
   Increment = 5,
   CurrentValue = 30,
   Flag = "FOV_Radius",
   Callback = function(v) Descarado.FOV_Radius = v end
})

AimbotTab:CreateColorPicker({
   Name = "FOV Circle Color",
   Color = Color3.fromRGB(255, 50, 50),
   Flag = "FOV_Color",
   Callback = function(c) Descarado.FOV_Color = c end
})

AimbotTab:CreateColorPicker({
   Name = "FOV Locked Color",
   Color = Color3.fromRGB(255, 150, 150),
   Flag = "FOV_LockedColor",
   Callback = function(c) Descarado.FOV_LockedColor = c end
})

-- Tus otros toggles de ESP siguen iguales (no los cambi茅)
VisualsTab:CreateToggle({ Name = "Enable ESP", CurrentValue = false, Flag = "ESP_Enabled", Callback = function(v) ESPSettings.Enabled = v end })
-- ... (todos los dem谩s toggles y sliders de Visuals y Settings sin cambios)

-- Settings Tab (sin cambios)
SettingsTab:CreateButton({
   Name = "Guardar Configuraci贸n Ahora",
   Callback = function()
      Rayfield:SaveConfiguration()
      Rayfield:Notify({Title = "Guardado", Content = "Configuraci贸n guardada manualmente", Duration = 4})
   end
})
-- ... (resto de botones de settings sin cambios)

-- Carga autom谩tica
Rayfield:LoadConfiguration()

print("Owen Xit Hub cargado - Aimbot DESCARADO instalado (snap instant谩neo)")
Rayfield:Notify({Title = "隆Actualizado!", Content = "Aimbot descarado activado\nRecomendado: FOV 20-40 para m谩ximo rage", Duration = 8})
